<!DOCTYPE html>
<html>
  <head>
    <title>贝叶斯知识追踪</title>
    <meta charset="utf-8">
    <meta name="author" content="冯俊晨" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="zh-CN.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# 贝叶斯知识追踪
## Bayesian Knowledge Tracing
### 冯俊晨
### 2018/08/02

---




---
# 定义学习效果

假设学生的掌握程度只有会和不会两种；学习可以定义为 0 -&gt; 1

如果我们可以观察到学生的掌握程度，测评教学内容($C$)的方法较为简单

$$P(X_1=1|X_0=0, C) $$

如果有多个程度，例如Vygosky的proxy zone learning theory）, 定义学习就会变的很复杂（但很有意思）。
`$$P(X_1=1|X_0=0, C)$$`
`$$P(X_1=2|X_0=0, C)$$`
`$$P(X_1=2|X_0=1,C)$$`
---
# 研究学习效果的障碍

然而，学生的掌握程度是不可见的（如果真实存在的话）。我们只能看到学生的作答 `\(Y\)`（假设取值是0/1）。

因此，我们需要从 `\(Y\)` 去推测 `\(X\)`
.pull-left[
`$$Y_t\dots,Y_0$$` 

`$$X_t|Y_t\dots,Y_0$$`
]

.pull-right[

我们看到的

我们想要的

]


---
# Sic Parvis Magna

`$$P(X_1|Y_1,Y_0) = \frac{\sum_{X_0} P(X_1,X_0Y_1,Y_0)}{\sum_{X_0} \sum_{X_1}P(X_1,X_0Y_1,Y_0)}$$`


`$$P(X_1,X_0,Y_1,Y_0) = P(Y_1|X_1)P(Y_0|X_0)P(X_1|X_0)P(X_0)$$`

---
# BKT的核心元素

猜测： `\(g=P(Y_t=1|X_t=0)\)`

粗心： `\(s=P(Y_t=0|X_t=1)\)`

学习： `\(\ell=P(X_t=1|X_{t-1}=0)\)`

初始能力： `\(\pi=P(X_0=1)\)`

*假设*

没有遗忘： `\(P(X_t=0|X_{t-1}=1)=0\)`

BKT事实上还有其他假设，但是我们暂时不考虑它

---
# 例子
`$$\pi=0.3, \ell=0.5, s=0.1, g=0.3,Y_1=1, Y_0=0$$`
`$$P(X_0=1,X_1=1)=0.3$$`
`$$P(X_0=0,X_1=1)=0.35$$`
`$$P(X_0=0,X_0=0)=0.35$$`
`$$P(Y_0,Y_1,X_0=1,X_1=1) = 0.027$$`
`$$P(Y_0,Y_1,X_0=0,X_1=1) = 0.189$$`
`$$P(Y_0,Y_1,X_0=0,X_1=0) = 0.084$$`
`$$P(X_1=1|Y_0,Y_1)=0.72$$`

---
# 怎么估计这些参数？

Hidden Markov Model + EM algorithm = Magic




```r
p0 = data.frame(init=0.5, learn=0.5, guess=0.25, slip=0.25)
m = bkt.hmm.fit(p0, test_data)
```

```
## [1] "iteration: 1 diff: 0.830339177342382"
## [1] "iteration: 2 diff: 0.0838393287147893"
## [1] "iteration: 3 diff: 0.0801466876022289"
## [1] "iteration: 4 diff: 0.0731939462765649"
## [1] "iteration: 5 diff: 0.0637704623129884"
## [1] "iteration: 6 diff: 0.0531401351705119"
## [1] "iteration: 7 diff: 0.0426010876938319"
## [1] "iteration: 8 diff: 0.0331235976994511"
## [1] "iteration: 9 diff: 0.0252110101253321"
## [1] "iteration: 10 diff: 0.0189598371777259"
## [1] "iteration: 11 diff: 0.0142105135380167"
## [1] "iteration: 12 diff: 0.0106931685872036"
## [1] "iteration: 13 diff: 0.00812537264456045"
```

---
# DaDa

```r
print(m)
```

```
##    init learn guess  slip
## 1 0.365  0.15 0.043 0.356
```




```r
print(bkt_param)
```

```
##     course_id  init learn guess  slip
## 1 interactive 0.432 0.227 0.064 0.208
## 2  long_video 0.484 0.210 0.078 0.164
## 3 short_video 0.403 0.156 0.053 0.283
## 4     control 0.365 0.150 0.043 0.356
```
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
