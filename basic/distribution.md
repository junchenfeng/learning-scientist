# 课程目标
=================

- 理解随机变量 与 随机变量的分布
- 能够默写伯努利分布与二项式分布的pmf
- 能够在excel中计算正态分布的cdf
- 理解先验分布和后验分布的区别，并且能够计算简单后验分布


# 随机变量的分布

随机变量 取值为随机的变量

**思考1** ： 记麻将摸牌阶段摸起第一张牌为随机变量X。解释它的含义 

随机变量的分布  ~= 把 **取值范围**  关联到 **取值概率** 的列表。

**思考2**：记麻将摸牌阶段摸起的第一张牌为随机变量X，摸起的第二张牌为随机变量Y。X和Y的分布相同么？

**思考3**：记麻将打牌阶段摸起的第一张牌为随机变量X，摸起的第二张牌为随机变量Y。X和Y的分布相同么？

一般我们用大写字母（例如X）来表示随机变量，用小写字母（例如x）来表示随机变量的取值


1.离散的随机变量
==============
取值可以用枚举法描述的随机变量（~=取值可能性有限多)。

# 伯努利分布
取值范围： 0， 1

取值概率：1-p， p

X ~ Bernoulli(p)

**思考4** 请用大白话解释伯努利分布

**思考5** 请用大白话解释 P(Y=y), Y ~ Bernoulli(q)


# 二项式分布
X ~ Binomial(n,p) 

标准解释：n个独立同分布的Bernoulli(p)变量的和

大白话解释：每次抽1的概率为p，抽0的概率为1-p；抽n次后的总和。

**思考6** 请给出Binomial(4, 0.4)的取值范围
 
**思考7** 穷举 P(X=x) if X ~ Binomial



2.离散变量的分布函数
==================


概率密度函数(Probability Mass Function, pmf) : 描述变量取值等于x的概率
        f(x) = P(X=x)

累计概率函数(Cumulative Probability Function, cpf): 描述变量取值小于等于x的概率 
        F(x) = P(X<=x)

一个随机变量可以用pmf或者cpf来定义。这一节我们主要关注pmf

**思考8** Bernoulli(p)的pmf

**思考9** Binomial(n,p)的pmf

**思考10** Bernoulli(p) 和 Binomial(1,p)是同一个分布么？

3.连续的随机变量
===============
取值只能用范围来描述的变量(~=取值可能性无穷多)。

# 连续变量的分布函数
如果用离散变量的想法去刻画连续变量，需要列无穷多的pmf。不可行。但是cpf是可行的。

F(x) = P(X<=x)

![cdf](https://wikimedia.org/api/rest_v1/media/math/render/svg/196e1cf3f666dc8c65f1bd0dc1304a0fe0c4e002)

f(x)被称为概率密度分布函数(probability density function)。它接近于pmf，但是并不是pmf。连续变量取任何值的概率都是0！

# 正态分布
X 取值范围 为全部实数

![normalpdf](https://wikimedia.org/api/rest_v1/media/math/render/svg/4abaca87a10ecfa77b5a205056523706fe6c9c3f)
        
 

# 累积分布函数的取值

假设X ~ N(0,1)，求以下三个值并且在pdf图上画出阴影部分

(1a) F(1.98) ~= 0.975

(1b) F(-1.98) ~= 0.025

(2) F(1.98) - F(-1.98) ~=0.95

(3) 1 - (F(1.98) - F(-1.98)) ~= 0.05

**思考8** (3)式和(4)式如何表达成|x|的cdf？ 


4.中央极限定理(了解)
==============

到目前为止，我们没有讨论过均值和标准差。

第一层答案是均值和标准差是描述随机变量的一组统计量(statistics)。我们事实上用均值和标准差描述分布，而不是cdf或者pdf/pmf。

但是描述分布的统计量有很多种，比如四分位（quantiles， 25%，50%，75%分位数）或者极值(min, max)。为什么初级统计学要选择均值和标准差呢？

为了回答这个问题，我们需要知道以下两个知识：

(1) 对于正态分布而言，均值和标准差唯一确定了分布函数。即我们知道了均值和标准差，就可以知道了整个分布函数

(2) 对于任何一个方差为有限值的分布，它的均值的分布是一个参数可知的正态分布。

第二点就是中央极限定理的大致描述，这个定理是为什么

(a) AB Test里一般测试均值，因为大样本下均值的分布已知

(b) 大多数Business Intelligence报表使用均值，因为比较两个均值几乎等同于比较两个分布【举例，比较两个月的AURP值】

**思考8** 在什么情况下，报表不应该使用均值


5.贝叶斯遇上随机变量(了解)
=====================


先验分布X，后验分布X|D

![image](https://wikimedia.org/api/rest_v1/media/math/render/svg/a4d6516fc9ee92f81286c9b6e44b01d6335d96bd)




6.课后作业：
==========


令theta = X=1|X=0，假设我们知道学习有效性的分布符合离散分布P(theta=0.2) = 0.25, P(theta=0.5) = 0.35, P(theta=0.75) = 0.4

P(X0=1)=0.6, P(Y=1|X=0) = 0.3, P(Y=0|X=1) = 0.1, P(X=0|X=1) = 0

我们观察到数据 (Y0=0, Y1=1)

求theta|D的后验分布

        P(Y0=0,Y1=1|theta)
        = P(Y0=0,Y1=1,X0=0,X1=0|theta) +  P(Y0=0,Y1=1,X0=0,X1=1|theta) + P(Y0=0,Y1=1,X0=1,X1=1|theta)
        = P(Y0=0,Y1=1|X0=0,X1=0,theta)P(X0=0,X1=0|theta) + P(Y0=0,Y1=1|X0=0,X1=1,theta)P(X0=0,X1=1|theta) + P(Y0=0,Y1=1|X0=1,X1=1,theta)P(X0=1,X1=1|theta)
        = P(Y0=0|X0=0)P(Y1=1|X1=0)P(X0=0)P(X1=0|X0=0,theta) + P(Y0=0|X0=0)P(Y1=1|X1=1)P(X0=0)P(X1=1|X0=0,theta) + P(Y0=0|X0=1)P(Y1=1|X1=1)P(X0=1)P(X1=1|X0=1,theta)
        = 0.7*0.3*0.4*(1-theta)+0.7*0.9*0.4*theta+0.1*0.9*0.6*1
        = 0.084*(1-theta) + 0.252*theta + 0.054
        = 0.138 + 0.168*theta
        
theta = 0.2

        P(Y0=0,Y1=1|theta=0.2) = 0.1716
        
theta = 0.5

        P(Y0=0,Y1=1|theta=0.5) = 0.222
        
theta = 0.75

        P(Y0=0,Y1=1|theta=0.75) = 0.264
        
 
P(theta=0.2 | Y0=0, Y1=1) = 0.25*0.1716 / (0.25*0.1716+0.35*0.222+0.4*0.264) ~= 0.18

P(theta=0.5 | Y0=0, Y1=1) = 0.35*0.222 / (0.25*0.1716+0.35*0.222+0.4*0.264) ~= 0.34

P(theta=0.75 | Y0=0, Y1=1) = 0.4*0.264 / (0.25*0.1716+0.35*0.222+0.4*0.264) ~= 0.478
 



思考题答案
==============
1. X可以为0或者1， X为1的概率是p，为0的概率是1-p。

2. 变量X取值x时的概率。在这里，P(X=1) = p, P(X=0) = 1-p

3. 0,1,2,3,4

4. 

        P(X=0) = 0.6^4*0.4^0*C(4,0)
        P(X=1) = 0.6^3*0.4^1*C(4,1)
        P(X=2) = 0.6^2*0.4^2*C(4,2)
        P(X=3) = 0.6^1*0.4^3*C(4,3)
        P(X=4) = 0.6^0*0.4^3*C(4,4)
 
5.

        p^x(1-p)^(1-x)
        
6.

        p^x(1-p)^(n-p)*C(n,p)
        
7.  是。pmf相同。

8. (3)式是F(1.98) - F(-1.98) = P(|x|<=1.98), (4)式是1-P(|x|<=1.98) = P(|x|>1.98)

9. (1) 样本数<=100时，不能够使用中央极限定理；(2) 少数长尾分布，均值严重扭曲的情况，例如平均收入。事实上我们一般认为收入符合帕累托分布，部分帕累托分布的方差为正无穷，事实上无法使用中央极限定理！
